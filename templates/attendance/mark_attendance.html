{% extends 'base.html' %}

{% block content %}

<!-- ================================================= -->
<!-- ğŸ“‹ Page Heading -->
<!-- ================================================= -->
<h2>ğŸ“‹ Mark Attendance â€“ {{ date }}</h2>

<!-- ================================================= -->
<!-- â„¹ï¸ Information Note -->
<!-- ================================================= -->
<p style="color: #555;">
    <b>Note:</b> Agar same date ki attendance dobara submit ki jaati hai,
    to purani attendance <b>UPDATE</b> ho jaayegi (duplicate nahi banegi).
</p>

<hr>

<!-- ================================================= -->
<!-- ğŸ“ Attendance Form -->
<!-- ================================================= -->
<form method="post">
    {% csrf_token %}
    <!-- CSRF token: Django security ke liye mandatory -->

    <!-- =============================== -->
    <!-- ğŸ“… Date Selector -->
    <!-- =============================== -->
    <label for="date"><b>Date:</b></label>
    <input
        type="date"
        id="date"
        name="date"
        value="{{ date }}"
        required
    >

    <br><br>

    <!-- =============================== -->
    <!-- ğŸ‘¨â€ğŸ“ Students Attendance Table -->
    <!-- =============================== -->
    <table border="1" cellpadding="10" cellspacing="0" width="60%">
        <tr style="background-color: #f2f2f2;">
            <th>Student Name</th>
            <th>Present</th>
            <th>Absent</th>
        </tr>

        {% for student in students %}
        <tr>
            <!-- Student username -->
            <td>{{ student.username }}</td>

            <!-- ============================== -->
            <!-- âœ… Present radio button -->
            <!-- name = student.id
                 value = 'P' (Present)
                 Ye value views.py me status ke roop me jaati hai
            -->
            <td style="text-align: center;">
                <input
                    type="radio"
                    name="{{ student.id }}"
                    value="P"
                >
            </td>

            <!-- ============================== -->
            <!-- âŒ Absent radio button -->
            <!-- value = 'A' (Absent)
                 Default Absent rakha gaya hai
            -->
            <td style="text-align: center;">
                <input
                    type="radio"
                    name="{{ student.id }}"
                    value="A"
                    checked
                >
            </td>
        </tr>

        {% empty %}
        <!-- Agar koi student na ho -->
        <tr>
            <td colspan="3" style="text-align:center;">
                No students found.
            </td>
        </tr>
        {% endfor %}
    </table>

    <br>

    <!-- ================================================= -->
    <!-- ğŸ’¾ Submit Button -->
    <!-- ================================================= -->
    <button type="submit">
        âœ… Save Attendance
    </button>
</form>

{% endblock %}
