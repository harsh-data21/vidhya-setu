{% extends 'base.html' %}

{% block content %}

<!-- ================================================= -->
<!-- ğŸ“Š Page Heading -->
<!-- ================================================= -->
<h2>ğŸ“… Monthly Attendance Report</h2>

<!-- ================================================= -->
<!-- ğŸ” Filter Section -->
<!-- ================================================= -->
<form method="get" style="margin-bottom: 20px;">
    <!-- Month input -->
    <label>Month:</label>
    <input type="number" name="month" min="1" max="12" value="{{ month }}" required>

    <!-- Year input -->
    <label>Year:</label>
    <input type="number" name="year" value="{{ year }}" required>

    <button type="submit">ğŸ” View Report</button>
</form>

<hr>

<!-- ================================================= -->
<!-- ğŸ“‹ Attendance Report Table -->
<!-- ================================================= -->
{% if report %}
<table border="1" cellpadding="10" cellspacing="0" width="70%">
    <tr style="background-color: #f2f2f2;">
        <th>Student Name</th>
        <th>Present Days</th>
        <th>Absent Days</th>
        <th>Total Days</th>
    </tr>

    {% for row in report %}
    <tr>
        <!-- Student name -->
        <td>{{ row.student.username }}</td>

        <!-- Present count -->
        <td style="color: green; font-weight: bold;">
            {{ row.present }}
        </td>

        <!-- Absent count -->
        <td style="color: red; font-weight: bold;">
            {{ row.absent }}
        </td>

        <!-- Total days = Present + Absent -->
        <td>
            {{ row.present|add:row.absent }}
        </td>
    </tr>
    {% endfor %}
</table>

{% else %}
<p style="color: gray;">No attendance data available for this month.</p>
{% endif %}

<br>

<!-- ================================================= -->
<!-- ğŸ”™ Back Links -->
<!-- ================================================= -->
{% if user.role == 'ADMIN' %}
    <a href="{% url 'admin_dashboard' %}">â† Back to Admin Dashboard</a>
{% else %}
    <a href="{% url 'teacher_dashboard' %}">â† Back to Teacher Dashboard</a>
{% endif %}

{% endblock %}
