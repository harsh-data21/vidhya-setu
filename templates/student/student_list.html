{% extends 'base.html' %}
{% block content %}

<h2>ğŸ‘¨â€ğŸ“ Student List</h2>

<!-- ================= SEARCH & FILTER ================= -->
<form method="get" style="margin-bottom:15px;">

    <input
        type="text"
        name="q"
        placeholder="Search by name / roll / admission no"
        value="{{ request.GET.q }}"
    >

    <!-- CLASS FILTER -->
    <select name="class">
        <option value="">Class</option>
        {% for cls in classes %}
            <option value="{{ cls }}"
                {% if request.GET.class == cls %}selected{% endif %}
            >
                {{ cls }}
            </option>
        {% endfor %}
    </select>

    <!-- SECTION FILTER -->
    <select name="section">
        <option value="">Section</option>
        {% for sec in sections %}
            <option value="{{ sec }}"
                {% if request.GET.section == sec %}selected{% endif %}
            >
                {{ sec }}
            </option>
        {% endfor %}
    </select>

    <!-- FEES FILTER -->
    <select name="fees">
        <option value="">Fees</option>
        <option value="paid" {% if request.GET.fees == 'paid' %}selected{% endif %}>
            Paid
        </option>
        <option value="unpaid" {% if request.GET.fees == 'unpaid' %}selected{% endif %}>
            Not Paid
        </option>
    </select>

    <button type="submit">ğŸ” Search</button>
</form>

<hr>

<!-- ================= STUDENT TABLE ================= -->
<table border="1" cellpadding="8" cellspacing="0" width="100%">
    <tr>
        <th>Roll No</th>
        <th>Name</th>
        <th>Class</th>
        <th>Section</th>
        <th>Fees Status</th>
    </tr>

    {% for s in students %}
    <tr>
        <td>{{ s.roll_no }}</td>
        <td>{{ s.first_name }} {{ s.last_name }}</td>
        <td>{{ s.student_class }}</td>
        <td>{{ s.section }}</td>
        <td>
            {% if s.fees_paid %}
                <span style="color:green;">âœ… Paid</span>
            {% else %}
                <span style="color:red;">âŒ Not Paid</span>
            {% endif %}
        </td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="5" style="text-align:center;">
            No students found
        </td>
    </tr>
    {% endfor %}
</table>

{% endblock %}
